(this.webpackJsonp2048=this.webpackJsonp2048||[]).push([[0],{31:function(e,n,t){e.exports=t(73)},36:function(e,n,t){},72:function(e,n,t){},73:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),c=t(27),a=t.n(c),i=(t(36),t(4)),u=t(28),s=t(30),l=t(29);var f=function(e,n,t){var r=0;return{newBlocks:function(e,n,t){if(n>1&&(e=e.map((function(e){return e.reverse()}))),0===n||2===n)return e.reduce((function(e,n){return e.concat(n)}),[]);var r=e.reduce((function(e,n){return n.length+e}),0);return e.reduce((function(e,n,r){return n.forEach((function(n,o){e[o*t+r]=n})),e}),new Array(r))}(function(e,n,t){var r=[];if(0===n||2===n)for(var o=0,c=e.length;o<c;o+=t)r.push(e.slice(o,o+t));else for(var a=0,i=e.length;a<i;a++){var u=a%t;r[u]?r[u].push(e[a]):r.push([e[a]])}return n>1&&(r=r.map((function(e){return e.reverse()}))),r}(e.slice(),n,t).map((function(e){var n=function(e){for(var n=0,t=0;t<e.length;t++){if(e.slice(t).reduce((function(e,n){return 0===n&&e}),!0))return{row:e,score:n};0!==e[t]?t>0&&e[t-1]===e[t]&&(n+=2*e[t],e[t-1]=2*e[t],e.splice(t,1),e.push(0)):(e.splice(t,1),e.push(0),t!==e.length-1&&t--)}return{row:e,score:n}}(e),t=n.row,o=n.score;return r+=o,t})),n,t),newScore:r}},d=function(e){return e[e.length*Math.random()|0]},b=function(e){var n=e.reduce((function(e,n,t){return 0===n?[].concat(Object(l.a)(e),[t]):e}),new Array);return e[d(n)]=d([2,2,2,4]),e},g=function(e,n){return JSON.stringify(e)===JSON.stringify(n)},v=function(e,n,t){var r=f(e,n,t),o=r.newBlocks,c=r.newScore;return Object(s.a)({},function(e,n){var t=f(e,0,n),r=f(e,1,n),o=f(e,2,n),c=f(e,3,n);return{newBlocks:e,isFailed:g(t,r)&&g(r,o)&&g(o,c)}}(b(o),t),{newScore:c})},w=function(e){return b(new Array(e*e).fill(0))},m=function(e){switch(e){case 0:return{background:"#CDC0B4",font:"#CDC0B4"};case 2:return{background:"#EEE4DA",font:"#797066"};case 4:return{background:"#EFE3D1",font:"#797066"};case 8:return{background:"#F9B482",font:"#FAF7F4"};case 16:return{background:"#FB9569",font:"#FAF7F4"};case 32:return{background:"#FD7C64",font:"#FAF7F4"};case 64:return{background:"#F15A40",font:"#FAF7F4"};case 128:return{background:"#F5D873",font:"#FAF7F4"};case 256:return{background:"#F3D058",font:"#FAF7F4"};case 512:return{background:"#E6C03E",font:"#FAF7F4"};case 1024:return{background:"#E5BA32",font:"#FAF7F4"};case 2048:return{background:"#EFC42F",font:"#FAF7F4"};case 4096:return{background:"#BA84AA",font:"#FAF7F4"};default:return{background:"#AE60A4",font:"#FAF7F4"}}},h=t(2),k=Object(h.styled)("div")({name:"Container",class:"c12glev3"}),F=Object(h.styled)("header")({name:"Header",class:"h1r94c0d"}),p=Object(h.styled)("h1")({name:"Title",class:"t19mys8v"}),y=Object(h.styled)("div")({name:"Score",class:"sp7i1w0"}),E=Object(h.styled)("nav")({name:"Info",class:"iaq1kkt"}),O=Object(h.styled)("nav")({name:"Controls",class:"c1o20y8w"}),j=Object(h.styled)("button")({name:"Button",class:"bfqkrc7"}),A=Object(h.styled)("ul")({name:"Body",class:"bils1sa",vars:{"bils1sa-0":[function(e){return e.disabled?"none":"all"}],"bils1sa-1":[function(e){return e.disabled?.4:1}]}}),S=Object(h.styled)("li")({name:"Block",class:"b7ouyw7",vars:{"b7ouyw7-0":[function(e){return e.bg}],"b7ouyw7-1":[function(e){return e.size}],"b7ouyw7-2":[function(e){return e.color}]}}),B=Object(h.styled)("div")({name:"Failed",class:"fowulf0"}),C=Object(h.styled)("footer")({name:"Footer",class:"fqq93rd"}),D=Object(h.styled)("a")({name:"Link",class:"lx7k1qk"});t(72);var W=t(14),J=t.n(W);function N(e,n,t,o){var c=Object(r.useCallback)(n,t||[]);Object(r.useEffect)((function(){return J.a.bind(e,c,o),function(){J.a.unbind(e)}}),[e,c,o])}var q=function(e,n){var t=localStorage.getItem(e);null!==t&&(n=JSON.parse(t));var o=Object(r.useState)(n),c=Object(i.a)(o,2),a=c[0],u=c[1];return Object(r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(a))}),[e,a]),[a,u]};var R=function(){var e=q("is-end",!1),n=Object(i.a)(e,2),t=n[0],r=n[1],c=q("score",0),a=Object(i.a)(c,2),s=a[0],l=a[1],f=q("score-back",s),d=Object(i.a)(f,2),b=d[0],g=d[1],h=q("blocks",w(4)),W=Object(i.a)(h,2),J=W[0],R=W[1],I=q("blocks-back",J),L=Object(i.a)(I,2),T=L[0],U=L[1],x=function(e){return function(){return!t&&R((function(n){var t=v(n,e,4),o=t.newBlocks,c=t.isFailed,a=t.newScore;return r(c),U(n),l((function(e){return g(e),e+a})),o}))}},z=Object(u.a)({onSwipedLeft:x(0),onSwipedUp:x(1),onSwipedRight:x(2),onSwipedDown:x(3)});N("left",x(0)),N("up",x(1)),N("right",x(2)),N("down",x(3));var M=function(){r(!1),R(T),l(b)};return N("ctrl+z",M,[M]),o.a.createElement(k,null,o.a.createElement(F,null,o.a.createElement(p,null,"2048"),o.a.createElement(E,null,o.a.createElement(O,null,o.a.createElement(j,{onClick:M},"Back"),o.a.createElement(j,{onClick:function(){window.confirm("Are you sure?")&&(R(w(4)),r(!1))}},"Reset")),o.a.createElement(y,null,"Score: ",s))),t&&o.a.createElement(B,null,o.a.createElement("h1",null,"That's all, folks!")),o.a.createElement(A,Object.assign({disabled:t},z),J.map((function(e,n){return o.a.createElement(S,{bg:m(e).background,color:m(e).font,size:e>512?e>16e3?"1.4em":"1.6em":"2em",key:"".concat(e,"-").concat(n)},o.a.createElement("span",null,e))}))),o.a.createElement(C,null,o.a.createElement(D,{href:"https://github.com/noartem",target:"_blank"},"@noartem"))," ")},I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(R,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/2048",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/2048","/service-worker.js");I?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):L(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):L(n,e)}))}}()}},[[31,1,2]]]);
//# sourceMappingURL=main.6c2830a8.chunk.js.map